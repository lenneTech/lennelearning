<div class="container relative">
  <app-trophy (loopComplete)="check()"></app-trophy>
  <div class="blur d-flex justify-content-center" #content>
    <nb-card class="milestone-card card-res">
      <nb-card-body class="d-flex align-items-center justify-content-center">
        <nb-stepper #stepper orientation="horizontal">
          <nb-step>
            <div class="d-flex justify-content-center">
              <img
                [src]="mileStoneSection.logo"
                class="img-fluid brand-img"
                alt="Illustration des abgeschlossenen Abschnitts"
                loading="lazy"
              />
            </div>
            <h2 class="text-center title">Herzlichen Glückwunsch!</h2>
            <div class="d-flex justify-content-center">
              <p class="milestone-text text-center w-md-50">{{ mileStoneSection.description }}</p>
            </div>
          </nb-step>
          <nb-step *ngIf="mileStoneSection.exampleList">
            <div class="d-flex justify-content-center align-items-center">
              <h2 class="text-center example-title">Was kannst Du jetzt schon?</h2>
            </div>
          </nb-step>
          <nb-step *ngFor="let item of mileStoneSection.exampleList; let i = index">
            <div class="row">
              <div class="col-12 d-flex justify-content-center align-items-center">
                <academy-picture
                  [image]="item.imageUrl"
                  [alt]="item.alt"
                  [reference]="item.reference"
                  imgClass="img-fluid example-image"
                  *ngIf="item.imageUrl"
                ></academy-picture>
              </div>
              <div class="col-12 d-flex ps-5 pe-5 justify-content-center align-items-center mt-4">
                <p class="milestone-text text-center">{{ item.text }}</p>
              </div>
            </div>
          </nb-step>
        </nb-stepper>
      </nb-card-body>
      <nb-card-footer>
        <div class="row d-flex justify-content-between">
          <div class="col-6">
            <button nbButton class="nav-btn" (click)="prevStep()" *ngIf="checkPrev()" data-cy="milestone-prev">
              ❮ Zurück
            </button>
          </div>
          <div class="col-6 d-flex justify-content-end">
            <button nbButton class="nav-btn" data-cy="milestone-next" (click)="nextStep()" *ngIf="checkNext()">
              Weiter ❯
            </button>
            <button
              nbButton
              class="nav-btn"
              data-cy="milestone-next-section"
              (click)="navigateToNextSection()"
              *ngIf="!checkNext() && nextSection"
            >
              Zu {{ nextSection }} ❯
            </button>
          </div>
        </div>
      </nb-card-footer>
    </nb-card>
  </div>
</div>
